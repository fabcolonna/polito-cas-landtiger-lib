<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Landtiger LPC1768 C BigLib: Keil/Include/Peripherals/dac.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Landtiger LPC1768 C BigLib<span id="projectnumber">&#160;1</span>
   </div>
   <div id="projectbrief">A self made, custom C library for the LandTiger board.</div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('dac_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">dac.h File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="dac__types_8h_source.html">dac_types.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="types_8h_source.html">types.h</a>&quot;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
</div>
<p><a href="dac_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a7a161960c371e597e996e0655e74221b" id="r_a7a161960c371e597e996e0655e74221b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dac_8h.html#a7a161960c371e597e996e0655e74221b">DAC_BUZInit</a> (<a class="el" href="types_8h.html#a92c50087ca0e64fa93fc59402c55f8ca">u8</a> timer_a, <a class="el" href="types_8h.html#a92c50087ca0e64fa93fc59402c55f8ca">u8</a> timer_b, <a class="el" href="types_8h.html#a92c50087ca0e64fa93fc59402c55f8ca">u8</a> int_priority)</td></tr>
<tr class="memdesc:a7a161960c371e597e996e0655e74221b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the DAC peripheral.  <br /></td></tr>
<tr class="separator:a7a161960c371e597e996e0655e74221b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bae91ff35a379868b8c2e55d7fb852a" id="r_a8bae91ff35a379868b8c2e55d7fb852a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dac_8h.html#a8bae91ff35a379868b8c2e55d7fb852a">DAC_BUZDeinit</a> (void)</td></tr>
<tr class="separator:a8bae91ff35a379868b8c2e55d7fb852a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af26bd8d6eebeb593f4c7063ca37bfd41" id="r_af26bd8d6eebeb593f4c7063ca37bfd41"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dac_8h.html#af26bd8d6eebeb593f4c7063ca37bfd41">DAC_BUZPlay</a> (<a class="el" href="structDAC__Tone.html">DAC_Tone</a> tone, <a class="el" href="types_8h.html#ace9d960e74685e2cd84b36132dbbf8aa">u16</a> bpm)</td></tr>
<tr class="memdesc:af26bd8d6eebeb593f4c7063ca37bfd41"><td class="mdescLeft">&#160;</td><td class="mdescRight">Plays the given note for the given duration.  <br /></td></tr>
<tr class="separator:af26bd8d6eebeb593f4c7063ca37bfd41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3388073389b5c82380434f21693ffea4" id="r_a3388073389b5c82380434f21693ffea4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dac_8h.html#a3388073389b5c82380434f21693ffea4">DAC_BUZSetVolume</a> (<a class="el" href="types_8h.html#a92c50087ca0e64fa93fc59402c55f8ca">u8</a> volume)</td></tr>
<tr class="memdesc:a3388073389b5c82380434f21693ffea4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the volume of the buzzer.  <br /></td></tr>
<tr class="separator:a3388073389b5c82380434f21693ffea4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1faa89bba12cf6b46bf253c0f28a1f5f" id="r_a1faa89bba12cf6b46bf253c0f28a1f5f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dac_8h.html#a1faa89bba12cf6b46bf253c0f28a1f5f">DAC_BUZIsPlaying</a> (void)</td></tr>
<tr class="separator:a1faa89bba12cf6b46bf253c0f28a1f5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c0419d68f425534648f8b1b33677734" id="r_a9c0419d68f425534648f8b1b33677734"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dac_8h.html#a9c0419d68f425534648f8b1b33677734">DAC_BUZStop</a> (void)</td></tr>
<tr class="separator:a9c0419d68f425534648f8b1b33677734"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a8bae91ff35a379868b8c2e55d7fb852a" name="a8bae91ff35a379868b8c2e55d7fb852a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8bae91ff35a379868b8c2e55d7fb852a">&#9670;&#160;</a></span>DAC_BUZDeinit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DAC_BUZDeinit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dac_8c_source.html#l00076">76</a> of file <a class="el" href="dac_8c_source.html">dac.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   77</span>{</div>
<div class="line"><span class="lineno">   78</span>    LPC_PINCON-&gt;PINSEL1 &amp;= ~(3 &lt;&lt; 20);</div>
<div class="line"><span class="lineno">   79</span>    LPC_GPIO0-&gt;FIODIR &amp;= ~(1 &lt;&lt; 26);</div>
<div class="line"><span class="lineno">   80</span> </div>
<div class="line"><span class="lineno">   81</span>    <a class="code hl_function" href="dac_8c.html#a9c0419d68f425534648f8b1b33677734">DAC_BUZStop</a>();</div>
<div class="line"><span class="lineno">   82</span>    <a class="code hl_function" href="timer_8h.html#acf4acd9ea7e9ee456f6a8e32c5b9c730">TIMER_Deinit</a>(<a class="code hl_variable" href="dac_8c.html#a66f98e5b5b13cd6b4c4bee12d1d47b54">DAC_SamplesTimer</a>);</div>
<div class="line"><span class="lineno">   83</span>    <a class="code hl_function" href="timer_8h.html#acf4acd9ea7e9ee456f6a8e32c5b9c730">TIMER_Deinit</a>(<a class="code hl_variable" href="dac_8c.html#a2407d5fcc3441051fdd6d069ad389d22">DAC_SecondsTimer</a>);</div>
<div class="line"><span class="lineno">   84</span>}</div>
<div class="ttc" id="adac_8c_html_a2407d5fcc3441051fdd6d069ad389d22"><div class="ttname"><a href="dac_8c.html#a2407d5fcc3441051fdd6d069ad389d22">DAC_SecondsTimer</a></div><div class="ttdeci">_PRIVATE TIMER DAC_SecondsTimer</div><div class="ttdef"><b>Definition</b> <a href="dac_8c_source.html#l00009">dac.c:9</a></div></div>
<div class="ttc" id="adac_8c_html_a66f98e5b5b13cd6b4c4bee12d1d47b54"><div class="ttname"><a href="dac_8c.html#a66f98e5b5b13cd6b4c4bee12d1d47b54">DAC_SamplesTimer</a></div><div class="ttdeci">_PRIVATE TIMER DAC_SamplesTimer</div><div class="ttdef"><b>Definition</b> <a href="dac_8c_source.html#l00008">dac.c:8</a></div></div>
<div class="ttc" id="adac_8c_html_a9c0419d68f425534648f8b1b33677734"><div class="ttname"><a href="dac_8c.html#a9c0419d68f425534648f8b1b33677734">DAC_BUZStop</a></div><div class="ttdeci">void DAC_BUZStop(void)</div><div class="ttdef"><b>Definition</b> <a href="dac_8c_source.html#l00119">dac.c:119</a></div></div>
<div class="ttc" id="atimer_8h_html_acf4acd9ea7e9ee456f6a8e32c5b9c730"><div class="ttname"><a href="timer_8h.html#acf4acd9ea7e9ee456f6a8e32c5b9c730">TIMER_Deinit</a></div><div class="ttdeci">void TIMER_Deinit(TIMER timer)</div><div class="ttdoc">Deconfigures a TIMER peripheral (also match registers).</div><div class="ttdef"><b>Definition</b> <a href="timer_8c_source.html#l00124">timer.c:124</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7a161960c371e597e996e0655e74221b" name="a7a161960c371e597e996e0655e74221b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a161960c371e597e996e0655e74221b">&#9670;&#160;</a></span>DAC_BUZInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DAC_BUZInit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="types_8h.html#a92c50087ca0e64fa93fc59402c55f8ca">u8</a>&#160;</td>
          <td class="paramname"><em>timer_a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a92c50087ca0e64fa93fc59402c55f8ca">u8</a>&#160;</td>
          <td class="paramname"><em>timer_b</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a92c50087ca0e64fa93fc59402c55f8ca">u8</a>&#160;</td>
          <td class="paramname"><em>int_priority</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the DAC peripheral. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">int_priority</td><td>The interrupt priority of the timer. If set to INT_PRIO_DEF, the default interrupt priority will be used. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This implementation requires the use of 2 timers to feed the DAC with samples and to play the note for the given duration. By giving these parameters to this function, you ensure that those timers are not and won't be used for other purposes. </dd></dl>

<p class="definition">Definition at line <a class="el" href="dac_8c_source.html#l00066">66</a> of file <a class="el" href="dac_8c_source.html">dac.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   67</span>{</div>
<div class="line"><span class="lineno">   68</span>    <span class="comment">// Enable Analog OUT (function 10) on PIN on P0.26, located in PINSEL1</span></div>
<div class="line"><span class="lineno">   69</span>    LPC_PINCON-&gt;PINSEL1 |= (2 &lt;&lt; 20);</div>
<div class="line"><span class="lineno">   70</span>    LPC_GPIO0-&gt;FIODIR |= (1 &lt;&lt; 26);</div>
<div class="line"><span class="lineno">   71</span> </div>
<div class="line"><span class="lineno">   72</span>    <a class="code hl_function" href="timer_8h.html#a69aa5e0cea45d6ddbb45ff4c1ccb86d9">TIMER_Init</a>(&amp;<a class="code hl_variable" href="dac_8c.html#a66f98e5b5b13cd6b4c4bee12d1d47b54">DAC_SamplesTimer</a>, timer_a, <a class="code hl_define" href="types_8h.html#a5202a43c80a723b1eca55dd4296e61e1">NO_PRESCALER</a>, int_priority);</div>
<div class="line"><span class="lineno">   73</span>    <a class="code hl_function" href="timer_8h.html#a69aa5e0cea45d6ddbb45ff4c1ccb86d9">TIMER_Init</a>(&amp;<a class="code hl_variable" href="dac_8c.html#a2407d5fcc3441051fdd6d069ad389d22">DAC_SecondsTimer</a>, timer_b, <a class="code hl_define" href="types_8h.html#a5202a43c80a723b1eca55dd4296e61e1">NO_PRESCALER</a>, int_priority);</div>
<div class="line"><span class="lineno">   74</span>}</div>
<div class="ttc" id="atimer_8h_html_a69aa5e0cea45d6ddbb45ff4c1ccb86d9"><div class="ttname"><a href="timer_8h.html#a69aa5e0cea45d6ddbb45ff4c1ccb86d9">TIMER_Init</a></div><div class="ttdeci">void TIMER_Init(TIMER *timer, u8 which, u32 prescaler, u8 int_priority)</div><div class="ttdoc">Initializes a TIMER peripheral.</div><div class="ttdef"><b>Definition</b> <a href="timer_8c_source.html#l00062">timer.c:62</a></div></div>
<div class="ttc" id="atypes_8h_html_a5202a43c80a723b1eca55dd4296e61e1"><div class="ttname"><a href="types_8h.html#a5202a43c80a723b1eca55dd4296e61e1">NO_PRESCALER</a></div><div class="ttdeci">#define NO_PRESCALER</div><div class="ttdef"><b>Definition</b> <a href="types_8h_source.html#l00040">types.h:40</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1faa89bba12cf6b46bf253c0f28a1f5f" name="a1faa89bba12cf6b46bf253c0f28a1f5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1faa89bba12cf6b46bf253c0f28a1f5f">&#9670;&#160;</a></span>DAC_BUZIsPlaying()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool DAC_BUZIsPlaying </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dac_8c_source.html#l00114">114</a> of file <a class="el" href="dac_8c_source.html">dac.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  115</span>{</div>
<div class="line"><span class="lineno">  116</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="timer_8h.html#a9aa75657361c83fba9def9c70de56a93">TIMER_IsEnabled</a>(<a class="code hl_variable" href="dac_8c.html#a66f98e5b5b13cd6b4c4bee12d1d47b54">DAC_SamplesTimer</a>) &amp;&amp; <a class="code hl_function" href="timer_8h.html#a9aa75657361c83fba9def9c70de56a93">TIMER_IsEnabled</a>(<a class="code hl_variable" href="dac_8c.html#a2407d5fcc3441051fdd6d069ad389d22">DAC_SecondsTimer</a>);</div>
<div class="line"><span class="lineno">  117</span>}</div>
<div class="ttc" id="atimer_8h_html_a9aa75657361c83fba9def9c70de56a93"><div class="ttname"><a href="timer_8h.html#a9aa75657361c83fba9def9c70de56a93">TIMER_IsEnabled</a></div><div class="ttdeci">bool TIMER_IsEnabled(TIMER timer)</div><div class="ttdef"><b>Definition</b> <a href="timer_8c_source.html#l00248">timer.c:248</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af26bd8d6eebeb593f4c7063ca37bfd41" name="af26bd8d6eebeb593f4c7063ca37bfd41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af26bd8d6eebeb593f4c7063ca37bfd41">&#9670;&#160;</a></span>DAC_BUZPlay()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DAC_BUZPlay </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structDAC__Tone.html">DAC_Tone</a>&#160;</td>
          <td class="paramname"><em>tone</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#ace9d960e74685e2cd84b36132dbbf8aa">u16</a>&#160;</td>
          <td class="paramname"><em>bpm</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Plays the given note for the given duration. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tone</td><td>The tone to be played </td></tr>
    <tr><td class="paramname">bpm</td><td>The tempo of the note (i.e. 60, 120, 240, etc.) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="dac_8c_source.html#l00091">91</a> of file <a class="el" href="dac_8c_source.html">dac.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   92</span>{</div>
<div class="line"><span class="lineno">   93</span>    <span class="comment">// How many samples need to be sent to the DAC in a second in order to play the tone</span></div>
<div class="line"><span class="lineno">   94</span>    <a class="code hl_function" href="timer_8h.html#af14ccfb785489415199bb942b6942ab3">TIMER_SetInterruptHandler</a>(<a class="code hl_variable" href="dac_8c.html#a66f98e5b5b13cd6b4c4bee12d1d47b54">DAC_SamplesTimer</a>, <a class="code hl_enumvalue" href="timer__types_8h.html#affdd03c9fc536b1e3ebd79e7d80354e1afb036f6053b4978bfacad5ef88e72e22">TIM_INT_SRC_MR0</a>, <a class="code hl_function" href="dac_8c.html#a041c2bdf5273c90323931093280dd1b4">next_sample</a>);</div>
<div class="line"><span class="lineno">   95</span>    <a class="code hl_function" href="timer_8h.html#ad37af181a1c52d1637a4434a778a37a6">TIMER_SetMatch</a>(<a class="code hl_variable" href="dac_8c.html#a66f98e5b5b13cd6b4c4bee12d1d47b54">DAC_SamplesTimer</a>, (<a class="code hl_struct" href="structTIMER__MatchRegister.html">TIMER_MatchRegister</a>){.<a class="code hl_variable" href="structTIMER.html#ae4b34d152dfb711dbada962ab9cd2631">which</a> = <a class="code hl_enumvalue" href="timer__types_8h.html#a9af6df7595f52f58751687dd756139c1acf286fe2aff13b7d3675fd9667ba0cb7">TIM_MR0</a>,</div>
<div class="line"><span class="lineno">   96</span>                                                           .actions = <a class="code hl_enumvalue" href="timer__types_8h.html#ad9ad8ebc50931c3763a7c3d186136494a048b03caeddc1515dbcd9b98f004121a">TIM_MR_INT</a> | <a class="code hl_enumvalue" href="timer__types_8h.html#ad9ad8ebc50931c3763a7c3d186136494a2f4ab27785137b407d99eac13514d1ab">TIM_MR_RES</a>,</div>
<div class="line"><span class="lineno">   97</span>                                                           .match = get_tone_timing(tone.<a class="code hl_variable" href="structDAC__Tone.html#ad5784cbdd074201f0d5db084c79dc0c8">note</a>, tone.<a class="code hl_variable" href="structDAC__Tone.html#a0842347e8960b049f9c8df24cc6169f5">octave</a>)});</div>
<div class="line"><span class="lineno">   98</span> </div>
<div class="line"><span class="lineno">   99</span>    <span class="comment">// Since a tone has a type (i.e. a duration which depends on the BPM), the duration of the tone</span></div>
<div class="line"><span class="lineno">  100</span>    <span class="comment">// needs to be controlled by another timer, which, on match, will stop &amp; clear the samples timer.</span></div>
<div class="line"><span class="lineno">  101</span>    <span class="comment">// The duration (in seconds) of the tone is calculated by the formula: (60 * type) / bpm. Since</span></div>
<div class="line"><span class="lineno">  102</span>    <span class="comment">// each second the seconds timer ticks 25 million times, we need to multiply that by the duration</span></div>
<div class="line"><span class="lineno">  103</span>    <span class="keyword">const</span> <a class="code hl_typedef" href="types_8h.html#afaa62991928fb9fb18ff0db62a040aba">u32</a> tone_duration = <a class="code hl_define" href="dac_8c.html#a160f31a316bc48f593b20962529833d5">DAC_CLK_HZ</a> * ((60 * tone.<a class="code hl_variable" href="structDAC__Tone.html#a9c325b70127c36fedb39a8e8feba77f3">type</a>) / bpm);</div>
<div class="line"><span class="lineno">  104</span>    <a class="code hl_function" href="timer_8h.html#af14ccfb785489415199bb942b6942ab3">TIMER_SetInterruptHandler</a>(<a class="code hl_variable" href="dac_8c.html#a2407d5fcc3441051fdd6d069ad389d22">DAC_SecondsTimer</a>, <a class="code hl_enumvalue" href="timer__types_8h.html#affdd03c9fc536b1e3ebd79e7d80354e1afb036f6053b4978bfacad5ef88e72e22">TIM_INT_SRC_MR0</a>, <a class="code hl_function" href="dac_8c.html#a9c0419d68f425534648f8b1b33677734">DAC_BUZStop</a>);</div>
<div class="line"><span class="lineno">  105</span>    <a class="code hl_function" href="timer_8h.html#ad37af181a1c52d1637a4434a778a37a6">TIMER_SetMatch</a>(<a class="code hl_variable" href="dac_8c.html#a2407d5fcc3441051fdd6d069ad389d22">DAC_SecondsTimer</a>, (<a class="code hl_struct" href="structTIMER__MatchRegister.html">TIMER_MatchRegister</a>){.<a class="code hl_variable" href="structTIMER.html#ae4b34d152dfb711dbada962ab9cd2631">which</a> = <a class="code hl_enumvalue" href="timer__types_8h.html#a9af6df7595f52f58751687dd756139c1acf286fe2aff13b7d3675fd9667ba0cb7">TIM_MR0</a>,</div>
<div class="line"><span class="lineno">  106</span>                                                           .actions = <a class="code hl_enumvalue" href="timer__types_8h.html#ad9ad8ebc50931c3763a7c3d186136494a048b03caeddc1515dbcd9b98f004121a">TIM_MR_INT</a> | <a class="code hl_enumvalue" href="timer__types_8h.html#ad9ad8ebc50931c3763a7c3d186136494a2f4ab27785137b407d99eac13514d1ab">TIM_MR_RES</a> | <a class="code hl_enumvalue" href="timer__types_8h.html#ad9ad8ebc50931c3763a7c3d186136494accb06724eb2907e3f25d7f957c694dcb">TIM_MR_STP</a>,</div>
<div class="line"><span class="lineno">  107</span>                                                           .match = tone_duration});</div>
<div class="line"><span class="lineno">  108</span> </div>
<div class="line"><span class="lineno">  109</span>    <span class="comment">// Starts the timers (i.e. plays)</span></div>
<div class="line"><span class="lineno">  110</span>    <a class="code hl_function" href="timer_8h.html#a780be605a83aded3ab6c6a87868ba225">TIMER_Enable</a>(<a class="code hl_variable" href="dac_8c.html#a66f98e5b5b13cd6b4c4bee12d1d47b54">DAC_SamplesTimer</a>);</div>
<div class="line"><span class="lineno">  111</span>    <a class="code hl_function" href="timer_8h.html#a780be605a83aded3ab6c6a87868ba225">TIMER_Enable</a>(<a class="code hl_variable" href="dac_8c.html#a2407d5fcc3441051fdd6d069ad389d22">DAC_SecondsTimer</a>);</div>
<div class="line"><span class="lineno">  112</span>}</div>
<div class="ttc" id="adac_8c_html_a041c2bdf5273c90323931093280dd1b4"><div class="ttname"><a href="dac_8c.html#a041c2bdf5273c90323931093280dd1b4">next_sample</a></div><div class="ttdeci">_PRIVATE void next_sample(void)</div><div class="ttdef"><b>Definition</b> <a href="dac_8c_source.html#l00048">dac.c:48</a></div></div>
<div class="ttc" id="adac_8c_html_a160f31a316bc48f593b20962529833d5"><div class="ttname"><a href="dac_8c.html#a160f31a316bc48f593b20962529833d5">DAC_CLK_HZ</a></div><div class="ttdeci">#define DAC_CLK_HZ</div><div class="ttdef"><b>Definition</b> <a href="dac_8c_source.html#l00005">dac.c:5</a></div></div>
<div class="ttc" id="astructDAC__Tone_html_a0842347e8960b049f9c8df24cc6169f5"><div class="ttname"><a href="structDAC__Tone.html#a0842347e8960b049f9c8df24cc6169f5">DAC_Tone::octave</a></div><div class="ttdeci">u8 octave</div><div class="ttdef"><b>Definition</b> <a href="dac__types_8h_source.html#l00050">dac_types.h:50</a></div></div>
<div class="ttc" id="astructDAC__Tone_html_a9c325b70127c36fedb39a8e8feba77f3"><div class="ttname"><a href="structDAC__Tone.html#a9c325b70127c36fedb39a8e8feba77f3">DAC_Tone::type</a></div><div class="ttdeci">u8 type</div><div class="ttdef"><b>Definition</b> <a href="dac__types_8h_source.html#l00051">dac_types.h:51</a></div></div>
<div class="ttc" id="astructDAC__Tone_html_ad5784cbdd074201f0d5db084c79dc0c8"><div class="ttname"><a href="structDAC__Tone.html#ad5784cbdd074201f0d5db084c79dc0c8">DAC_Tone::note</a></div><div class="ttdeci">u16 note</div><div class="ttdef"><b>Definition</b> <a href="dac__types_8h_source.html#l00049">dac_types.h:49</a></div></div>
<div class="ttc" id="astructTIMER__MatchRegister_html"><div class="ttname"><a href="structTIMER__MatchRegister.html">TIMER_MatchRegister</a></div><div class="ttdef"><b>Definition</b> <a href="timer__types_8h_source.html#l00035">timer_types.h:36</a></div></div>
<div class="ttc" id="astructTIMER_html_ae4b34d152dfb711dbada962ab9cd2631"><div class="ttname"><a href="structTIMER.html#ae4b34d152dfb711dbada962ab9cd2631">TIMER::which</a></div><div class="ttdeci">u8 which</div><div class="ttdef"><b>Definition</b> <a href="timer__types_8h_source.html#l00044">timer_types.h:44</a></div></div>
<div class="ttc" id="atimer_8h_html_a780be605a83aded3ab6c6a87868ba225"><div class="ttname"><a href="timer_8h.html#a780be605a83aded3ab6c6a87868ba225">TIMER_Enable</a></div><div class="ttdeci">void TIMER_Enable(TIMER timer)</div><div class="ttdef"><b>Definition</b> <a href="timer_8c_source.html#l00203">timer.c:203</a></div></div>
<div class="ttc" id="atimer_8h_html_ad37af181a1c52d1637a4434a778a37a6"><div class="ttname"><a href="timer_8h.html#ad37af181a1c52d1637a4434a778a37a6">TIMER_SetMatch</a></div><div class="ttdeci">void TIMER_SetMatch(TIMER timer, TIMER_MatchRegister match_reg)</div><div class="ttdoc">Sets the match value for a match register of a TIMER peripheral.</div><div class="ttdef"><b>Definition</b> <a href="timer_8c_source.html#l00162">timer.c:162</a></div></div>
<div class="ttc" id="atimer_8h_html_af14ccfb785489415199bb942b6942ab3"><div class="ttname"><a href="timer_8h.html#af14ccfb785489415199bb942b6942ab3">TIMER_SetInterruptHandler</a></div><div class="ttdeci">void TIMER_SetInterruptHandler(TIMER timer, u8 source, TIMER_InterruptHandler handler)</div><div class="ttdoc">Sets the interrupt handler for a TIMER peripheral, on a specific source between the 4 match registers...</div><div class="ttdef"><b>Definition</b> <a href="timer__irq_8c_source.html#l00060">timer_irq.c:60</a></div></div>
<div class="ttc" id="atimer__types_8h_html_a9af6df7595f52f58751687dd756139c1acf286fe2aff13b7d3675fd9667ba0cb7"><div class="ttname"><a href="timer__types_8h.html#a9af6df7595f52f58751687dd756139c1acf286fe2aff13b7d3675fd9667ba0cb7">TIM_MR0</a></div><div class="ttdeci">@ TIM_MR0</div><div class="ttdef"><b>Definition</b> <a href="timer__types_8h_source.html#l00020">timer_types.h:20</a></div></div>
<div class="ttc" id="atimer__types_8h_html_ad9ad8ebc50931c3763a7c3d186136494a048b03caeddc1515dbcd9b98f004121a"><div class="ttname"><a href="timer__types_8h.html#ad9ad8ebc50931c3763a7c3d186136494a048b03caeddc1515dbcd9b98f004121a">TIM_MR_INT</a></div><div class="ttdeci">@ TIM_MR_INT</div><div class="ttdef"><b>Definition</b> <a href="timer__types_8h_source.html#l00030">timer_types.h:30</a></div></div>
<div class="ttc" id="atimer__types_8h_html_ad9ad8ebc50931c3763a7c3d186136494a2f4ab27785137b407d99eac13514d1ab"><div class="ttname"><a href="timer__types_8h.html#ad9ad8ebc50931c3763a7c3d186136494a2f4ab27785137b407d99eac13514d1ab">TIM_MR_RES</a></div><div class="ttdeci">@ TIM_MR_RES</div><div class="ttdef"><b>Definition</b> <a href="timer__types_8h_source.html#l00031">timer_types.h:31</a></div></div>
<div class="ttc" id="atimer__types_8h_html_ad9ad8ebc50931c3763a7c3d186136494accb06724eb2907e3f25d7f957c694dcb"><div class="ttname"><a href="timer__types_8h.html#ad9ad8ebc50931c3763a7c3d186136494accb06724eb2907e3f25d7f957c694dcb">TIM_MR_STP</a></div><div class="ttdeci">@ TIM_MR_STP</div><div class="ttdef"><b>Definition</b> <a href="timer__types_8h_source.html#l00033">timer_types.h:32</a></div></div>
<div class="ttc" id="atimer__types_8h_html_affdd03c9fc536b1e3ebd79e7d80354e1afb036f6053b4978bfacad5ef88e72e22"><div class="ttname"><a href="timer__types_8h.html#affdd03c9fc536b1e3ebd79e7d80354e1afb036f6053b4978bfacad5ef88e72e22">TIM_INT_SRC_MR0</a></div><div class="ttdeci">@ TIM_INT_SRC_MR0</div><div class="ttdef"><b>Definition</b> <a href="timer__types_8h_source.html#l00055">timer_types.h:55</a></div></div>
<div class="ttc" id="atypes_8h_html_afaa62991928fb9fb18ff0db62a040aba"><div class="ttname"><a href="types_8h.html#afaa62991928fb9fb18ff0db62a040aba">u32</a></div><div class="ttdeci">uint32_t u32</div><div class="ttdef"><b>Definition</b> <a href="types_8h_source.html#l00006">types.h:6</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3388073389b5c82380434f21693ffea4" name="a3388073389b5c82380434f21693ffea4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3388073389b5c82380434f21693ffea4">&#9670;&#160;</a></span>DAC_BUZSetVolume()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DAC_BUZSetVolume </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="types_8h.html#a92c50087ca0e64fa93fc59402c55f8ca">u8</a>&#160;</td>
          <td class="paramname"><em>volume</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the volume of the buzzer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">volume</td><td>The volume of the buzzer (between 0 and 10). </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="dac_8c_source.html#l00086">86</a> of file <a class="el" href="dac_8c_source.html">dac.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   87</span>{</div>
<div class="line"><span class="lineno">   88</span>    <a class="code hl_variable" href="dac_8c.html#ae88516c0b9143993c9bd6a9877e6e445">DAC_SinVolume</a> = (<a class="code hl_define" href="types_8h.html#abf2e62bc4dd4e7e52fc798ac3c643fd3">IS_BETWEEN_EQ</a>(volume, 0, 10)) ? volume : <a class="code hl_define" href="dac__types_8h.html#ad5bcd16b3e5b05a2785d037d699fe9a5">DAC_VOL_DEFAULT</a>;</div>
<div class="line"><span class="lineno">   89</span>}</div>
<div class="ttc" id="adac_8c_html_ae88516c0b9143993c9bd6a9877e6e445"><div class="ttname"><a href="dac_8c.html#ae88516c0b9143993c9bd6a9877e6e445">DAC_SinVolume</a></div><div class="ttdeci">_PRIVATE u8 DAC_SinVolume</div><div class="ttdef"><b>Definition</b> <a href="dac_8c_source.html#l00011">dac.c:11</a></div></div>
<div class="ttc" id="adac__types_8h_html_ad5bcd16b3e5b05a2785d037d699fe9a5"><div class="ttname"><a href="dac__types_8h.html#ad5bcd16b3e5b05a2785d037d699fe9a5">DAC_VOL_DEFAULT</a></div><div class="ttdeci">#define DAC_VOL_DEFAULT</div><div class="ttdef"><b>Definition</b> <a href="dac__types_8h_source.html#l00055">dac_types.h:55</a></div></div>
<div class="ttc" id="atypes_8h_html_abf2e62bc4dd4e7e52fc798ac3c643fd3"><div class="ttname"><a href="types_8h.html#abf2e62bc4dd4e7e52fc798ac3c643fd3">IS_BETWEEN_EQ</a></div><div class="ttdeci">#define IS_BETWEEN_EQ(value, low, hi)</div><div class="ttdef"><b>Definition</b> <a href="types_8h_source.html#l00023">types.h:23</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9c0419d68f425534648f8b1b33677734" name="a9c0419d68f425534648f8b1b33677734"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c0419d68f425534648f8b1b33677734">&#9670;&#160;</a></span>DAC_BUZStop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DAC_BUZStop </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dac_8c_source.html#l00119">119</a> of file <a class="el" href="dac_8c_source.html">dac.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  120</span>{</div>
<div class="line"><span class="lineno">  121</span>    <a class="code hl_variable" href="dac_8c.html#ae88516c0b9143993c9bd6a9877e6e445">DAC_SinVolume</a> = <a class="code hl_define" href="dac__types_8h.html#ad5bcd16b3e5b05a2785d037d699fe9a5">DAC_VOL_DEFAULT</a>;</div>
<div class="line"><span class="lineno">  122</span>    <a class="code hl_variable" href="dac_8c.html#ae1f7f0956702573113656cc95776ac82">DAC_SinTableIndex</a> = 0;</div>
<div class="line"><span class="lineno">  123</span>    LPC_DAC-&gt;DACR &amp;= ~(0x3FF &lt;&lt; 6);</div>
<div class="line"><span class="lineno">  124</span> </div>
<div class="line"><span class="lineno">  125</span>    <a class="code hl_function" href="timer_8h.html#a70b643ba4c4955a0faeb6cc99e23d729">TIMER_Disable</a>(<a class="code hl_variable" href="dac_8c.html#a66f98e5b5b13cd6b4c4bee12d1d47b54">DAC_SamplesTimer</a>);</div>
<div class="line"><span class="lineno">  126</span>    <a class="code hl_function" href="timer_8h.html#a4f8c93698725955ad7266a7d6cd5f78c">TIMER_Reset</a>(<a class="code hl_variable" href="dac_8c.html#a66f98e5b5b13cd6b4c4bee12d1d47b54">DAC_SamplesTimer</a>);</div>
<div class="line"><span class="lineno">  127</span> </div>
<div class="line"><span class="lineno">  128</span>    <a class="code hl_function" href="timer_8h.html#a4f8c93698725955ad7266a7d6cd5f78c">TIMER_Reset</a>(<a class="code hl_variable" href="dac_8c.html#a2407d5fcc3441051fdd6d069ad389d22">DAC_SecondsTimer</a>);</div>
<div class="line"><span class="lineno">  129</span>    <a class="code hl_function" href="timer_8h.html#a70b643ba4c4955a0faeb6cc99e23d729">TIMER_Disable</a>(<a class="code hl_variable" href="dac_8c.html#a2407d5fcc3441051fdd6d069ad389d22">DAC_SecondsTimer</a>);</div>
<div class="line"><span class="lineno">  130</span>}</div>
<div class="ttc" id="adac_8c_html_ae1f7f0956702573113656cc95776ac82"><div class="ttname"><a href="dac_8c.html#ae1f7f0956702573113656cc95776ac82">DAC_SinTableIndex</a></div><div class="ttdeci">_PRIVATE u32 DAC_SinTableIndex</div><div class="ttdef"><b>Definition</b> <a href="dac_8c_source.html#l00012">dac.c:12</a></div></div>
<div class="ttc" id="atimer_8h_html_a4f8c93698725955ad7266a7d6cd5f78c"><div class="ttname"><a href="timer_8h.html#a4f8c93698725955ad7266a7d6cd5f78c">TIMER_Reset</a></div><div class="ttdeci">void TIMER_Reset(TIMER timer)</div><div class="ttdoc">Resets a TIMER peripheral without deconfiguring it.</div><div class="ttdef"><b>Definition</b> <a href="timer_8c_source.html#l00265">timer.c:265</a></div></div>
<div class="ttc" id="atimer_8h_html_a70b643ba4c4955a0faeb6cc99e23d729"><div class="ttname"><a href="timer_8h.html#a70b643ba4c4955a0faeb6cc99e23d729">TIMER_Disable</a></div><div class="ttdeci">void TIMER_Disable(TIMER timer)</div><div class="ttdef"><b>Definition</b> <a href="timer_8c_source.html#l00229">timer.c:229</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_0ef21c9284ae11250bd32b90715261ef.html">Keil</a></li><li class="navelem"><a class="el" href="dir_db986a92bc8295559f335db676fe0550.html">Include</a></li><li class="navelem"><a class="el" href="dir_d1095239c66a360027a0b255427bde34.html">Peripherals</a></li><li class="navelem"><a class="el" href="dac_8h.html">dac.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
